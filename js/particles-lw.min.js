"use strict";var _createClass=function(){function t(t,e){for(var i,h=0;h<e.length;h++)i=e[h],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,h){return i&&t(e.prototype,i),h&&t(e,h),e}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var generators=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"createNewProportions",value:function(t,e){return t+(Math.floor(Math.random()*e)-e)}},{key:"createRandomColour",value:function(){return"rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")"}},{key:"colour",get:function(){return this.createRandomColour()}}]),t}(),particle=function(){function t(e,i,h){_classCallCheck(this,t),this.ctx=e,this.ctn=i,this.initPos(),this.settings={size:h.size||20,variance:h.variance||2,force:h.force||_defineProperty({speed:speed},"speed",speed),colour:this.selectColour(h.colour)||generator.colour};var s=generator.createNewProportions(this.settings.size,this.settings.variance);this.width=s,this.height=s}return _createClass(t,[{key:"initPos",value:function(){this.x=Math.floor(Math.random()*this.ctn.width),this.y=Math.floor(Math.random()*this.ctn.height)}},{key:"setCTN",value:function(t){this.ctn={width:t.width,height:t.height},this.initPos()}},{key:"render",value:function(){this.settings.colour&&(this.ctx.fillStyle=this.settings.colour,this.ctx.fillRect(this.x,this.y,this.width,this.height))}},{key:"selectColour",value:function(t){try{return t[Math.floor(Math.random()*t.length)]}catch(t){return!1}}},{key:"checkSettings",value:function(){this.x>this.ctn.width&&(this.x=-this.width,this.y=Math.floor(Math.random()*this.ctn.height)-10-this.width),this.y>this.ctn.height&&(this.y=-this.height,this.x=Math.floor(Math.random()*this.ctn.width)-10-this.height)}},{key:"nextStep",value:function(){this.x+=this.settings.force.x,this.y+=this.settings.force.y,this.render(),this.checkSettings()}}]),t}(),particle_circle=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,particle),_createClass(e,[{key:"render",value:function(){this.ctx.fillStyle=this.settings.colour,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.width/2,0,2*Math.PI),this.ctx.fill()}},{key:"checkSettings",value:function(){this.x-this.width>this.ctn.width&&(this.x=-this.width,this.y=Math.floor(Math.random()*this.ctn.height)-10-this.width),this.y-this.width>this.ctn.height&&(this.y=-this.height,this.x=Math.floor(Math.random()*this.ctn.width)-10-this.height)}}]),e}(),particleArea=function(){function t(e){var i=this;_classCallCheck(this,t),this.parent={dom:document.getElementById(e.root),box:document.getElementById(e.root).getBoundingClientRect()},this.width=this.parent.box.width,this.height=this.parent.box.height,this.settings=e,this.particles=[],window.onresize=function(){i.resizeCanvas()},this.createSelf(),this.createParticles(e.amount||20)}return _createClass(t,[{key:"createSelf",value:function(){var t=document.createElement("canvas");t.height=this.height,t.width=this.width,this.parent.dom.appendChild(t),this.ctx=t.getContext("2d"),this.can=t}},{key:"createParticles",value:function(t){switch(this.settings.type){case"circle":for(var e=0;e<t;e++)this.particles.push(new particle_circle(this.ctx,{width:this.parent.box.width,height:this.parent.box.height},this.settings));break;default:for(var i=0;i<t;i++)this.particles.push(new particle(this.ctx,{width:this.parent.box.width,height:this.parent.box.height},this.settings))}this.startAnimation()}},{key:"startAnimation",value:function(){var t=this;this.updateCanvas=function(){t.drawBG();for(var e=0;e<t.particles.length;e++)t.particles[e].nextStep()},this.canvasLoop=setInterval(this.updateCanvas,this.settings.msPerUpdate||10)}},{key:"pauseAnimation",value:function(){clearInterval(this.canvasLoop)}},{key:"drawBG",value:function(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle=this.settings.background,this.ctx.fillRect(0,0,this.width,this.height)}},{key:"resetSize",value:function(){this.parent.box=this.parent.dom.getBoundingClientRect(),this.width=this.parent.box.width,this.height=this.parent.box.height,this.can.width=this.width,this.can.height=this.height}},{key:"resizeCanvas",value:function(){var t=this;this.pauseAnimation(),this.resetSize(),this.drawBG(),this.resizeEnd&&clearTimeout(this.resizeEnd),this.resizeEnd=setTimeout(function(){for(var e=0;e<t.particles.length;e++)t.particles[e].setCTN({width:t.parent.box.width,height:t.parent.box.height});t.startAnimation()},50)}}]),t}(),generator=new generators;